!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/dist",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i{constructor(){this.popUpCall=document.querySelector(".popup-call"),this.popUpDiscount=document.querySelector(".popup-discount"),this.popUpCheck=document.querySelector(".popup-check"),this.popUpConsultation=document.querySelector(".popup-consultation"),this.activePopUp=null}togglePopUp(){document.addEventListener("click",t=>{let e=t.target;if(e.matches(".call-btn")&&(this.popUpCall.classList.add("active"),this.activePopUp=this.popUpCall),e.matches(".discount-btn")&&(this.popUpDiscount.classList.add("active"),this.activePopUp=this.popUpDiscount),e.matches(".check-btn")&&(this.popUpCheck.classList.add("active"),this.activePopUp=this.popUpCheck),e.matches(".consultation-btn")&&(this.popUpConsultation.classList.add("active"),this.activePopUp=this.popUpConsultation),this.activePopUp){let t=e.closest(".popup-content");(e.matches(".popup-close")||e.matches(".popup")&&!t)&&this.activePopUp.classList.remove("active")}})}}class o{constructor(){this.errorImg="./img/icons/error.png",this.loadImg="./img/icons/load.png",this.successImg="./img/icons/success.png",this.statusMessage=document.createElement("img"),this.forms=document.querySelectorAll("form"),this.body=!1}postData(t){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}statusRotate(t){this.statusMessage.classList.contains("rotate")?(t+=1,this.statusMessage.style.transform=`rotate(${t}deg)`,requestAnimationFrame(()=>{this.statusRotate(t)})):this.statusMessage.style.transform="rotate(0deg)"}validation(t){t.querySelectorAll("input").forEach(t=>{let e="";t.addEventListener("keypress",s=>{"user_name"===t.getAttribute("name")&&(e=/[а-я]/i),s.key.match(e)||s.preventDefault()})})}send(t){t.addEventListener("submit",e=>{e.preventDefault();let s={};if(new FormData(t).forEach((t,e)=>{s[e]=t}),t.classList.contains("construct-form"))return s["calc-result"]=document.querySelector("#calc-result").value,void(this.body=s);t.classList.contains("director-form")?this.body=s:(t.appendChild(this.statusMessage),this.statusMessage.src=this.loadImg,this.statusMessage.classList.add("rotate"),requestAnimationFrame(()=>{this.statusRotate(0)}),this.body&&Object.assign(s,this.body),this.postData(s).then(e=>{if(!e.ok)throw new Error("Ошибка HTTP: "+e.status);this.statusMessage.src=this.successImg,this.statusMessage.classList.remove("rotate"),this.body=!1,t.querySelectorAll("input").forEach(t=>{t.value=""}),setTimeout(()=>{t.removeChild(this.statusMessage)},2e3)}).catch(e=>{console.log(e),this.statusMessage.src=this.errorImg,this.statusMessage.classList.remove("rotate"),this.body="",setTimeout(()=>{t.removeChild(this.statusMessage)},2e3)}))})}init(){this.forms.forEach(t=>{this.validation(t),this.send(t)})}}class a{constructor(t,e,s,i){this.container=document.querySelector(t),this.headers=this.container.querySelectorAll(e),this.bodies=this.container.querySelectorAll(s),this.indexes=this.container.querySelectorAll(i),this.elemHeadClass=e}togglePanel(){this.container.addEventListener("click",t=>{let e=t.target.closest(this.elemHeadClass);e&&(t.preventDefault(),this.headers.forEach((t,s)=>{if(t===e)for(let t=0;t<this.bodies.length;t++)if(t===s){this.bodies[t].classList.add("in");let e=this.container.querySelector(this.indexes[t].getAttribute("href"));document.getElementById(e.getAttribute("aria-labelledby")).scrollIntoView({behavior:"smooth",block:"start"})}else this.bodies[t].classList.remove("in")}))})}}class n{constructor(){this.container=document.querySelector(".constructor"),this.blocks=this.container.querySelectorAll(".panel-collapse"),this.btns=this.container.querySelectorAll("a.construct-btn"),this.checkbox=this.container.querySelector("#myonoffswitch"),this.checkbox2=this.container.querySelector("#myonoffswitch-two"),this.selectD=this.container.querySelectorAll(".diametr"),this.selectQ=this.container.querySelectorAll(".quantity"),this.result=this.container.querySelector("#calc-result"),this.type=!0,this.diametr=!1,this.quantity=!1,this.bottom=!0}calculate(t,e,s,i){let o=0,a=0;return t?(a=1e4,o=a,o+=i?1e3:0,o+=2==+e?.2*a:0,o+=2==+s?.3*a:3==+s?.5*a:0):(a=15e3,o=a,o+=i?2e3:0,o+=2==+e.first?.2*a:0,o+=2==+s.first?.3*a:3==+s.first?.5*a:0,o+=2==+e.second?.2*a:0,o+=2==+s.second?.3*a:3==+s.second?.5*a:0),Math.ceil(o)}sumAnimate(t,e){if(t<=e){let s=e/10,i=e%10;t+=t===e-i?i:s,this.result.value=t,requestAnimationFrame(()=>{this.sumAnimate(t,e)})}}addEvents(){this.btns.forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();let s=document.querySelector(`${t.getAttribute("href")}`);this.blocks.forEach(t=>{t!==s&&t.classList.remove("in")}),s.classList.add("in"),document.getElementById(s.getAttribute("aria-labelledby")).scrollIntoView({behavior:"smooth",block:"start"})})}),this.container.addEventListener("change",t=>{let e=t.target;if(e===this.checkbox){let t=this.container.querySelector(".second_block"),e=[],s=t.querySelectorAll("select");if(this.checkbox.checked)this.type=!0,t.classList.add("hidden"),s.forEach(t=>{e.push(t.getAttribute("name")),t.removeAttribute("name")}),this.diametr=this.selectD[0].value,this.quantity=this.selectQ[0].value;else{let i=0;t.classList.remove("hidden"),s.forEach(t=>{i++,t.setAttribute("name",e[i])}),this.type=!1,this.diametr={first:this.selectD[0].value,second:this.selectD[1].value},this.quantity={first:this.selectQ[0].value,second:this.selectQ[1].value}}}e===this.checkbox2&&(this.bottom=!!this.checkbox2.checked),e!==this.selectD[0]&&e!==this.selectD[1]||(this.diametr=this.type?this.selectD[0].value:{first:this.selectD[0].value,second:this.selectD[1].value}),e!==this.selectQ[0]&&e!==this.selectQ[1]||(this.quantity=this.type?this.selectQ[0].value:{first:this.selectQ[0].value,second:this.selectQ[1].value}),requestAnimationFrame(()=>{this.sumAnimate(0,this.calculate(this.type,this.diametr,this.quantity,this.bottom))})})}init(){requestAnimationFrame(()=>{this.sumAnimate(0,this.calculate(this.type,this.diametr,this.quantity,this.bottom))}),this.addEvents()}}class r{constructor(t){if(this.el=this.getElement(t.selector),!this.el)return console.log("Что-то не так с селектором");this.layout=t.layout||"+7 (___) ___-__-__",this.maskreg=this.getRegexp(),this.setListeners()}getRegexp(){let t=this.layout.replace(/_/g,"\\d");return t=t.replace(/\(/g,"\\("),t=t.replace(/\)/g,"\\)"),t=t.replace(/\+/g,"\\+"),t=t.replace(/\s/g,"\\s"),t}mask(t){let e=t.target,s=this.layout,i=0,o=s.replace(/\D/g,""),a=e.value.replace(/\D/g,"");if(o.length>=a.length&&(a=o),e.value=s.replace(/./g,(function(t){return/[_\d]/.test(t)&&i<a.length?a.charAt(i++):i>=a.length?"":t})),"blur"===t.type){new RegExp(this.maskreg).test(e.value)||(e.value="")}else this.setCursorPosition(e.value.length,e)}setCursorPosition(t,e){if(e.focus(),e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){let s=e.createTextRange();s.collapse(!0),s.moveEnd("character",t),s.moveStart("character",t),s.select()}}setListeners(){this.el.addEventListener("input",this.mask.bind(this),!1),this.el.addEventListener("focus",this.mask.bind(this),!1),this.el.addEventListener("blur",this.mask.bind(this),!1)}getElement(t){if(void 0===t)return!1;if(this.isElement(t))return t;if("string"==typeof t){let e=document.querySelector(t);if(this.isElement(e))return e}return!1}isElement(t){return t instanceof Element||t instanceof HTMLDocument}}document.addEventListener("DOMContentLoaded",()=>{const t=new a("#accordion",".panel-heading",".panel-collapse","a.collapsed"),e=new a("#accordion-two",".panel-heading",".panel-collapse","a.collapsed"),s=document.querySelectorAll('input[name="user_phone"]');t.togglePanel(),e.togglePanel(),(new n).init(),(new i).togglePopUp(),(new o).init(),Array.prototype.forEach.call(s,(function(t){new r({selector:t,layout:t.dataset.mask})})),function(){const t=document.querySelector(".sentence"),e=t.querySelector(".add-sentence-btn"),s=t.querySelectorAll(".hidden");e.addEventListener("click",()=>{s.forEach(t=>{t.classList.remove("hidden")}),e.style.display="none"})}()})}]);